import subprocess
import os

port = []

def sh():
    shw = """
    ██████╗░░█████╗░██████╗░████████╗  ██╗░░░██╗███████╗██████╗░░██████╗██╗░█████╗░███╗░░██╗
    ██╔══██╗██╔══██╗██╔══██╗╚══██╔══╝  ██║░░░██║██╔════╝██╔══██╗██╔════╝██║██╔══██╗████╗░██║
    ██████╔╝██║░░██║██████╔╝░░░██║░░░  ╚██╗░██╔╝█████╗░░██████╔╝╚█████╗░██║██║░░██║██╔██╗██║
    ██╔═══╝░██║░░██║██╔══██╗░░░██║░░░  ░╚████╔╝░██╔══╝░░██╔══██╗░╚═══██╗██║██║░░██║██║╚████║
    ██║░░░░░╚█████╔╝██║░░██║░░░██║░░░  ░░╚██╔╝░░███████╗██║░░██║██████╔╝██║╚█████╔╝██║░╚███║
    ╚═╝░░░░░░╚════╝░╚═╝░░╚═╝░░░╚═╝░░░  ░░░╚═╝░░░╚══════╝╚═╝░░╚═╝╚═════╝░╚═╝░╚════╝░╚═╝░░╚══╝

    ███████╗██╗░░██╗██████╗░██╗░░░░░░█████╗░██╗████████╗  ░██████╗░█████╗░░█████╗░███╗░░██╗███╗░░██╗███████╗██████╗░
    ██╔════╝╚██╗██╔╝██╔══██╗██║░░░░░██╔══██╗██║╚══██╔══╝  ██╔════╝██╔══██╗██╔══██╗████╗░██║████╗░██║██╔════╝██╔══██╗
    █████╗░░░╚███╔╝░██████╔╝██║░░░░░██║░░██║██║░░░██║░░░  ╚█████╗░██║░░╚═╝███████║██╔██╗██║██╔██╗██║█████╗░░██████╔╝
    ██╔══╝░░░██╔██╗░██╔═══╝░██║░░░░░██║░░██║██║░░░██║░░░  ░╚═══██╗██║░░██╗██╔══██║██║╚████║██║╚████║██╔══╝░░██╔══██╗
    ███████╗██╔╝╚██╗██║░░░░░███████╗╚█████╔╝██║░░░██║░░░  ██████╔╝╚█████╔╝██║░░██║██║░╚███║██║░╚███║███████╗██║░░██║
    ╚══════╝╚═╝░░╚═╝╚═╝░░░░░╚══════╝░╚════╝░╚═╝░░░╚═╝░░░  ╚═════╝░░╚════╝░╚═╝░░╚═╝╚═╝░░╚══╝╚═╝░░╚══╝╚══════╝╚═╝░░╚═╝

"""
    print(shw)

    ip = input("Please Enter Target IP: ")
    os.system('clear')
    subprocess.call(["nmap", "-sS", "-sV", "-oN", "output.txt", ip])
    os.system("clear")


def separator():
    dosya = open('output.txt', 'r')
    out = open('Vuln', 'w')
    out2 = open('Vuln2', 'w')
    satirlar = dosya.readlines()
    for satir in satirlar:
        f = satir.find("open")
        pathw = satir[f + 5:]
        pathw.split()
        if f >= 0:
            out.write(satir)
        else:
            pass

    dosya.close()
    out2.close()
    out.close()


def separator2():
    dosya = open("Vuln", 'r')
    f_out = open("Vuln2", 'w')
    oku = dosya.readlines()
    for satir in oku:
        f = satir.find("open")
        ff = f + 15
        f_out.write(satir[ff::])
    dosya.close()
    f_out.close()


def ExSc():
    path = open('Vuln2', 'r')
    path2 = path.readlines()
    ss = "+++===+++"
    for i in path2:
        print("\n" * 3)
        print(ss, i.capitalize(), ss)
        print("\n" * 1)
        subprocess.call(["searchsploit", i])
        print("\n" * 3)
    path.close()
    os.remove("Vuln")
    os.remove("output.txt")
    os.remove("Vuln2")


if __name__ == "__main__":
    sh()
    separator()
    separator2()
    ExSc()
